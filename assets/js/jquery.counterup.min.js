(function() {
  // Target date: 2025-12-19 16:30 Bogot√° time (UTC-5)
  const weddingDate = new Date("2025-12-19T16:30:00-05:00");

  const counters = document.querySelectorAll(".single-counter .counter");

  function updateCountdown() {
    const now = new Date();
    const diff = weddingDate - now;

    if (diff <= 0) {
      counters.forEach(el => el.textContent = "0");
      return;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const mins = Math.floor((diff / (1000 * 60)) % 60);
    const secs = Math.floor((diff / 1000) % 60);

    const values = [days, hours, mins, secs];
    counters.forEach((el, i) => animateCount(el, values[i]));
  }

  function animateCount(el, newValue) {
    const oldValue = parseInt(el.textContent) || 0;
    if (oldValue === newValue) return; // Skip if no change

    const duration = 300; // animation ms
    const startTime = performance.now();

    function frame(time) {
      const progress = Math.min((time - startTime) / duration, 1);
      const value = Math.floor(oldValue + (newValue - oldValue) * progress);
      el.textContent = value;
      if (progress < 1) requestAnimationFrame(frame);
    }

    requestAnimationFrame(frame);
  }

  // First run
  updateCountdown();
  // Update every second
  setInterval(updateCountdown, 1000);
})();